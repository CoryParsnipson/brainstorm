{% extends 'blog/templates/template_dashboard.html' %}
{% load staticfiles %}

{% block content %}
<div class="row">
    <div class="large-10 large-offset-1 medium-12 small-12 columns">
        <h2>
            {% if "thought_slug" in request.GET %}
            Edit Thought
            {% else %}
            Write New Thought
            {% endif %}
        </h2>

        <form action="{% url 'forms-thought' %}" method="post" enctype="multipart/form-data">
            {% csrf_token %}
            <input type="hidden" name="author" value="{{ request.user.id }}" />
            <input type="hidden" name="next" value="{% url 'dashboard-thoughts' %}?idea_slug=$$idea$$" />
            <input type="hidden" name="old_slug" value="{{ thought_form.slug.value|default_if_none:'' }}" />

            <table class="form-thought">
                <tr>
                    <th class="shrink">{{ thought_form.title.label_tag }}</th>
                    <th class="shrink">{{ thought_form.slug.label_tag }}</th>
                    <th class="shrink">{{ thought_form.idea.label_tag }}</th>
                </tr>
                <tr>
                    <td class="expand">{{ thought_form.title }}</td>
                    <td class="shrink">{{ thought_form.slug }}</td>
                    <td class="shrink">
                        {% if not idea %}
                        {{ thought_form.idea }}
                        {% endif %}
                    </td>
                </tr>
                <tr>
                    <td colspan="3">{{ thought_form.content }}</td>
                </tr>
                <tr>
                    <td colspan="3">
                        {{ thought_form.preview.label_tag }}
                        {{ thought_form.preview }}
                    </td>
                </tr>
                <tr>
                    <td colspan="3">
                        <input id="button_clear" class="left" type="button" value="Clear" />
                        <input id="button_revert" class="left" type="button" value="Revert Changes" />

                        {% if thought_form.is_draft.value == True %}
                        <input class="left" type="submit" name="is_draft" value="Save Changes" />
                        <input class="publish right" type="submit" value="Publish" />
                        {% else %}
                          {% if "thought_slug" in request.GET %}
                          <input class="publish right" type="submit" value="Edit" />
                          {% else %}
                          <input class="left" type="submit" name="is_draft" value="Save as Draft" />
                          <input class="publish right" type="submit" name="publish" value="Publish" />
                          {% endif %}
                        {% endif %}
                    </td>
                </tr>
            </table>
        </form>
    </div>
</div>
{% endblock %}
