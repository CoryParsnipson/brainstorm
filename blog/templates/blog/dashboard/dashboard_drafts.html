{% extends 'blog/templates/template_dashboard.html' %}
{% load staticfiles %}

{% block content %}
<h1>Drafts</h1>

<table class="editable">
    <tbody>
    {% for idea, thoughts in drafts.items %}
    <tr>
        <th colspan="4">{{ idea }}</th>
    </tr>

    <tr>
        <td class="editable-header">Title</td>
        <td class="editable-header">Slug</td>
        <td class="editable-header">Content</td>
        <td></td>
        <td></td>
    </tr>

    {% for draft in thoughts %}
    <form action="{% url 'dashboard-thoughts-backend' %}" method="post">
        <input type="hidden" name="thought_slug" value="{{ draft.slug }}" />
        <input type="hidden" name="next" value="{% url 'dashboard-drafts' %}" />
        {% csrf_token %}
        <tr>
            <td class="shrink">{{ draft.title }}</td>
            <td class="shrink">{{ draft.slug }}</td>
            <td>{{ draft.content|safe }}</td>
            <td class="shrink">
                <a class="editable-button" href="{% url 'dashboard-author' %}?thought_slug={{ draft.slug }}">edit</a>
            </td>
            <td class="shrink">
                <input type="submit" name="trash" value="discard" />
            </td>
        </tr>
    </form>
    {% endfor %}
    {% empty %}
    <tr><td>There are no drafts in database.</td></tr>
    {% endfor %}
    </tbody>
</table>
{% endblock %}