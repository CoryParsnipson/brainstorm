{% extends 'blog/templates/template_default.html' %}
{% load staticfiles %}

{% block http_headers %}
<link rel="stylesheet" type="text/css" href="{% static 'css/thought.css' %}">
{% endblock %}

{% block content %}
<p class="idea"><a class="reverse-color" href="{% url 'idea-page' thought.idea.slug %}">{{ thought.idea }}</a></p>
<p class="title">{{ thought.title }}
    {% if thought.is_draft %}<span class="edit">draft</span>{% endif %}
    {% if request.user.is_authenticated and request.user.is_superuser %}
    <a class="edit" href="{% url 'dashboard-author' %}?thought_slug={{ thought.slug }}">edit</a>
    {% endif %}
</p>
<p class="subtitle">by {{ thought.author }} on {{ thought.date_published|date:"F j, Y g:i A" }}
    {% if thought.is_edited %}
    (Edited {{ thought.date_edited|date:"F j, Y g:i A" }})
    {% endif %}
</p>

<img class="preview" src="{{ thought.get_preview|default_if_none:thought.idea.icon.url }}" />
<div class="content">{{ thought.content|safe }}</div>

<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'slackerparadise';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
{% endblock %}

{% block side %}
{% if next_thoughts %}
<ul class="small-block-grid-1 thought-nav">
    <li><div class="header strong">Next</div></li>
    {% for next_thought in next_thoughts reversed %}
    <li>
        {% if next_thought %}
        <div class="nav">
            <a class="overlay" href="{% url 'thought-page' next_thought.idea.slug next_thought.slug %}"></a>
            <p>{{ next_thought.title }}</p>
            <img src="{{ next_thought.get_preview|default_if_none:thought.idea.icon.url }}" />
        </div>
        {% else %}
        <div class="nav-placeholder"><p>&nbsp;</p><span>SP</span></div>
        {% endif %}
    </li>
    {% empty %}
    <li><div class="nav-placeholder"><p>&nbsp;</p><span>SP</span></div></li>
    {% endfor %}
</ul>
{% endif %}

<hr>

{% if prev_thoughts %}
<ul class="small-block-grid-1 thought-nav">
    <li><div class="header strong">Previous</div></li>
    {% for prev_thought in prev_thoughts %}
    <li>
        {% if prev_thought %}
        <div class="nav">
            <a class="overlay" href="{% url 'thought-page' prev_thought.idea.slug prev_thought.slug %}"></a>
            <p>{{ prev_thought.title }}</p>
            <img src="{{ prev_thought.get_preview|default_if_none:thought.idea.icon.url }}" />
        </div>
        {% else %}
        <div class="nav-placeholder"><p>&nbsp;</p><span>SP</span></div>
        {% endif %}
    </li>
    {% empty %}
    <li><div class="nav-placeholder"><p>&nbsp;</p><span>SP</span></div></li>
    {% endfor %}
</ul>
{% endif %}

<hr>

<h3>This Thought is part of <a href="{% url 'idea-page' thought.idea.slug %}">{{ thought.idea.name }}</a></h3>
<p>{{ thought.idea.description }}</p>
{% endblock %}

{% block footer %}
<h3>More in <a href="{% url 'idea-page' thought.idea.slug %}">{{ thought.idea.name }}</a>:</h3>
<ul class="small-block-grid-1 medium-block-grid-2 thought-nav">
    <li>
        <div class="header">Previous</div>
        {% if prev_thoughts and prev_thoughts.0 %}
        <div class="nav">
            <a class="overlay" href="{% url 'thought-page' prev_thoughts.0.idea.slug prev_thoughts.0.slug %}"></a>
            <p>{{ prev_thoughts.0.title }}</p>
            <img src="{{ prev_thoughts.0.get_preview|default_if_none:prev_thoughts.0.idea.icon.url }}" />
        </div>
        {% else %}
        <div class="nav-placeholder">
            <p>&nbsp;</p>
            <span>SP</span>
        </div>
        {% endif %}
    </li>
    <li>
        <div class="header right-justify">Next</div>
        {% if next_thoughts and next_thoughts.0 %}
        <div class="nav">
            <a class="overlay" href="{% url 'thought-page' next_thoughts.0.idea.slug next_thoughts.0.slug %}"></a>
            <p>{{ next_thoughts.0.title }}</p>
            <img src="{{ next_thoughts.0.get_preview|default_if_none:next_thoughts.0.idea.icon.url }}" />
        </div>
        {% else %}
        <div class="nav-placeholder">
            <p>&nbsp;</p>
            <span>SP</span>
        </div>
        {% endif %}
    </li>
</ul>
{% endblock %}